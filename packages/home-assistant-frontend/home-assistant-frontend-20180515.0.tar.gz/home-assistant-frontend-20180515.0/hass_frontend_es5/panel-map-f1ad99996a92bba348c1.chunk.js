(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{387:function(t,e,n){"use strict";n.r(e);n(78),n(37);var i,r,o=n(0),a=n(1),s=(n(135),n(10),n(160),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),l=(i=['\n    <style is="custom-style" include="iron-positioning"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class="marker">\n      <template is="dom-if" if="[[entityName]]">[[entityName]]</template>\n      <template is="dom-if" if="[[entityPicture]]">\n        <iron-image sizing="cover" class="fit" src="[[entityPicture]]"></iron-image>\n      </template>\n    </div>\n'],r=['\n    <style is="custom-style" include="iron-positioning"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class="marker">\n      <template is="dom-if" if="[[entityName]]">[[entityName]]</template>\n      <template is="dom-if" if="[[entityPicture]]">\n        <iron-image sizing="cover" class="fit" src="[[entityPicture]]"></iron-image>\n      </template>\n    </div>\n'],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(r)}})));var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,window.hassMixins.EventsMixin(a["a"])),s(e,[{key:"ready",value:function(){var t=this;(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ready",this).call(this),this.addEventListener("click",function(e){return t.badgeTap(e)})}},{key:"badgeTap",value:function(t){t.stopPropagation(),this.entityId&&this.fire("hass-more-info",{entityId:this.entityId})}}],[{key:"template",get:function(){return Object(o.a)(l)}},{key:"is",get:function(){return"ha-entity-marker"}},{key:"properties",get:function(){return{hass:{type:Object},entityId:{type:String,value:""},entityName:{type:String,value:null},entityPicture:{type:String,value:null}}}}]),e}();customElements.define(u.is,u);var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=function(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n    <style include=\"ha-style\">\n      #map {\n        height: calc(100% - 64px);\n        width: 100%;\n        z-index: 0;\n      }\n    </style>\n\n    <app-toolbar>\n      <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n      <div main-title>[[localize('panel.map')]]</div>\n    </app-toolbar>\n\n    <div id='map'></div>\n    "],["\n    <style include=\"ha-style\">\n      #map {\n        height: calc(100% - 64px);\n        width: 100%;\n        z-index: 0;\n      }\n    </style>\n\n    <app-toolbar>\n      <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n      <div main-title>[[localize('panel.map')]]</div>\n    </app-toolbar>\n\n    <div id='map'></div>\n    "]);window.L.Icon.Default.imagePath="/static/images/leaflet";var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,window.hassMixins.LocalizeMixin(a["a"])),c(e,[{key:"connectedCallback",value:function(){var t=this;(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this);var n=this._map=window.L.map(this.$.map),i=document.createElement("link");i.setAttribute("href",window.HASS_DEV?"/home-assistant-polymer/bower_components/leaflet/dist/leaflet.css":"/static/images/leaflet/leaflet.css"),i.setAttribute("rel","stylesheet"),this.$.map.parentNode.appendChild(i),n.setView([51.505,-.09],13),window.L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://cartodb.com/attributions">CartoDB</a>',maxZoom:18}).addTo(n),this.drawEntities(this.hass),setTimeout(function(){n.invalidateSize(),t.fitMap()},1)}},{key:"fitMap",value:function(){var t;0===this._mapItems.length?this._map.setView(new window.L.LatLng(this.hass.config.core.latitude,this.hass.config.core.longitude),14):(t=new window.L.latLngBounds(this._mapItems.map(function(t){return t.getLatLng()})),this._map.fitBounds(t.pad(.5)))}},{key:"drawEntities",value:function(t){var e=this._map;if(e){this._mapItems&&this._mapItems.forEach(function(t){t.remove()});var n=this._mapItems=[];Object.keys(t.states).forEach(function(i){var r=t.states[i],o=window.hassUtil.computeStateName(r);if(!(r.attributes.hidden&&"zone"!==window.hassUtil.computeDomain(r)||"home"===r.state)&&"latitude"in r.attributes&&"longitude"in r.attributes){var a;if("zone"===window.hassUtil.computeDomain(r)){if(r.attributes.passive)return;var s="";return s=r.attributes.icon?"<iron-icon icon='"+r.attributes.icon+"'></iron-icon>":o,a=window.L.divIcon({html:s,iconSize:[24,24],className:""}),n.push(window.L.marker([r.attributes.latitude,r.attributes.longitude],{icon:a,interactive:!1,title:o}).addTo(e)),void n.push(window.L.circle([r.attributes.latitude,r.attributes.longitude],{interactive:!1,color:"#FF9800",radius:r.attributes.radius}).addTo(e))}var l=r.attributes.entity_picture||"",u=o.split(" ").map(function(t){return t.substr(0,1)}).join("");a=window.L.divIcon({html:"<ha-entity-marker entity-id='"+r.entity_id+"' entity-name='"+u+"' entity-picture='"+l+"'></ha-entity-marker>",iconSize:[45,45],className:""}),n.push(window.L.marker([r.attributes.latitude,r.attributes.longitude],{icon:a,title:window.hassUtil.computeStateName(r)}).addTo(e)),r.attributes.gps_accuracy&&n.push(window.L.circle([r.attributes.latitude,r.attributes.longitude],{interactive:!1,color:"#0288D1",radius:r.attributes.gps_accuracy}).addTo(e))}})}}}],[{key:"template",get:function(){return Object(o.a)(p)}},{key:"is",get:function(){return"ha-panel-map"}},{key:"properties",get:function(){return{hass:{type:Object,observer:"drawEntities"},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1}}}}]),e}();customElements.define(d.is,d)}}]);