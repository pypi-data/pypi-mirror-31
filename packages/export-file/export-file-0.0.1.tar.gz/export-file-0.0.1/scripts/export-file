#!/usr/bin/env bash
{ set +x; } 2>/dev/null

usage="usage: ${BASH_SOURCE[0]} path ..."

[[ $# == 0 ]] || [[ $1 == "--help" ]] && {
    echo "$usage"; [[ $1 == "--help" ]]; exit # exit 0 if --help
}
while [[ $# != 0 ]]; do
    [ -s "$1" ] && {
        key="$(IFS='.';set ${1##*/}; echo $1 | awk '{print toupper($0)}')"
        (
            eval $key=
        ) &> /dev/null && {
            value="$(cat "$1")" || exit
            echo "export $key=\"$value\""
        }
    }
    shift
done;:
